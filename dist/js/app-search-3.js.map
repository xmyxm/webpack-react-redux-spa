{"version":3,"sources":["webpack:///./src/component/search/search.jsx","webpack:///./src/utils/date-format.js?f444","webpack:///./src/component/search/search.less"],"names":["action","Search","props","page","imgLoading","dataloading","totalCount","bloglist","nextProps","nextState","fetchData","isFetching","Json","data","TotalCount","PageIndex","PageSize","BlogWorkList","length","concat","window","onscroll","_self","e","document","body","scrollTop","innerHeight","scrollHeight","pullBlogData","fetchPosts","key","refs","keyname","value","userEntry","bind","Query","map","item","ID","Title","SortName","Content","PageViewTotal","ChangeDateFormat","UpdateTime","state","date","Date","parseInt","cellval","replace","month","getMonth","currentDate","getDate","getFullYear","ConvertDate","jsondate","Format","time","rule","o","getHours","getMinutes","getSeconds","Math","floor","getMilliseconds","k","RegExp","test","$1","substr","lens"],"mappings":";;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;AACA;;IAAWA,M;;AACX;;AACA;;;;AACA;;;;;;;;;;;;IAEMC,M;;;AACL,iBAAYC,KAAZ,EAAkB;AAAA;;AAAA,8GACXA,KADW;;AAEjB,QAAKC,IAAL,GAAY,CAAZ;AACA,QAAKC,UAAL,GAAkB,KAAlB;AACA,QAAKC,WAAL,GAAmB,KAAnB;AACA,QAAKC,UAAL,GAAkB,CAAlB;AACA,QAAKC,QAAL,GAAgB,EAAhB;AANiB;AAOjB;;;;wCAEqBC,S,EAAWC,S,EAAU;AAC1C,OAAGD,UAAUE,SAAb,EAAuB;AACnB,QAAGF,UAAUE,SAAV,CAAoBC,UAAvB,EAAmC;AAClC,UAAKN,WAAL,GAAmB,IAAnB;AACA,YAAO,KAAP;AACA;AACD,SAAKA,WAAL,GAAmB,KAAnB;AACA,QAAGG,UAAUE,SAAV,CAAoBE,IAAvB,EAA4B;AAC3B,SAAIC,OAAOL,UAAUE,SAAV,CAAoBE,IAA/B;AACH,SAAGC,QAAQA,KAAKC,UAAhB,EAA2B;AAC1B,WAAKR,UAAL,GAAkBO,KAAKC,UAAvB;AACA,UAAGD,KAAKE,SAAL,GAAiBF,KAAKG,QAAtB,IAAkCH,KAAKC,UAA1C,EAAqD;AACpD,YAAKV,UAAL,GAAkB,KAAlB;AACA,OAFD,MAEK;AACJ,SAAE,KAAKD,IAAP;AACA,YAAKC,UAAL,GAAkB,IAAlB;AACA;AACD,UAAGS,KAAKI,YAAL,IAAqBJ,KAAKI,YAAL,CAAkBC,MAA1C,EAAiD;AAChD,YAAKX,QAAL,GAAgB,KAAKA,QAAL,CAAcY,MAAd,CAAqBN,KAAKI,YAA1B,CAAhB;AACA,cAAO,IAAP;AACA;AACD;AACE;AACD;AACD,UAAO,KAAP;AACH;;;yCAEsB;AACtBG,UAAOC,QAAP,GAAkB,IAAlB;AACA;;;sCAEqB;AAClB,OAAIC,QAAQ,IAAZ;AACHF,UAAOC,QAAP,GAAkB,UAACE,CAAD,EAAO;AACf,QAAI,CAACD,MAAMlB,UAAP,IAAqBkB,MAAMjB,WAA/B,EAA4C;;AAE5C,QAAImB,SAASC,IAAT,CAAcC,SAAd,GAA0BN,OAAOO,WAAjC,GAA+C,GAA/C,GAAqDH,SAASC,IAAT,CAAcG,YAAvE,EAAqF;AACjFN,WAAMO,YAAN;AACH;AACJ,IANP;AAOMP,SAAMO,YAAN;AACH;;;iCAEU;AACb,QAAK3B,KAAL,CAAW4B,UAAX,CAAsB,oCAAtB,EAA2D,EAACf,WAAU,KAAKZ,IAAhB,EAAqB4B,KAAI,KAAKA,GAA9B,EAA3D;AACA;;;0BAEM;AACN,QAAK5B,IAAL,GAAY,CAAZ;AACA,QAAK4B,GAAL,GAAW,KAAKC,IAAL,CAAUC,OAAV,CAAkBC,KAA7B;AACA,QAAKL,YAAL;AACA;;;4BAESN,C,EAAE;AACX;AACA;;;2BAEO;AACP,UACC;AAAA;AAAA,MAAK,WAAY,WAAjB;AACC;AAAA;AAAA,OAAK,WAAY,MAAjB;AACC;AAAA;AAAA,QAAK,WAAY,YAAjB;AAAA;AAAA,MADD;AAEC;AAAA;AAAA,QAAK,WAAU,YAAf;AACC,+CAAO,MAAO,MAAd,EAAqB,MAAK,SAA1B,EAAoC,SAAW,KAAKY,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAA/C,EAA0E,WAAU,SAApF,EAA8F,KAAM,SAApG,GADD;AAEC,2CAAG,WAAY,IAAf,GAFD;AAGC,2CAAG,WAAY,KAAf,GAHD;AAIC;AAAA;AAAA,SAAK,WAAY,WAAjB,EAA6B,SAAW,KAAKC,KAAL,CAAWD,IAAX,CAAgB,IAAhB,CAAxC;AAAA;AAAA;AAJD;AAFD,KADD;AAUC;AAAA;AAAA,OAAK,WAAY,SAAjB;AACC;AAAA;AAAA,QAAI,WAAY,MAAhB;AAEE,WAAK7B,QAAL,CAAcW,MAAd,GAAuB,CAAxB,IAA8B,KAAKX,QAAL,CAAc+B,GAAd,CAAkB,gBAAQ;AACvD,cAAQ;AAAA;AAAA,UAAI,KAAOC,KAAKC,EAAhB,EAAoB,WAAY,MAAhC;AACL;AAAA;AAAA,WAAM,IAAI,aAAaD,KAAKC,EAA5B,EAAgC,WAAY,WAA5C;AACC;AAAA;AAAA,YAAK,WAAY,aAAjB;AACC;AAAA;AAAA,aAAK,WAAY,OAAjB;AAA0BD,gBAAKE;AAA/B,WADD;AAEC;AAAA;AAAA,aAAK,WAAY,KAAjB;AAAA;AAA2BF,gBAAKG;AAAhC;AAFD,UADD;AAKC;AAAA;AAAA,YAAG,WAAY,SAAf;AAA0BH,eAAKI;AAA/B,UALD;AAMC;AAAA;AAAA,YAAK,WAAY,aAAjB;AACC;AAAA;AAAA,aAAM,WAAY,MAAlB;AAAA;AAA6BJ,gBAAKK;AAAlC,WADD;AAEC;AAAA;AAAA,aAAM,WAAY,QAAlB;AAA4B,gCAASC,gBAAT,CAA0BN,KAAKO,UAA/B;AAA5B;AAFD;AAND;AADK,QAAR;AAaA,OAd6B;AAF/B,MADD;AAqBE,UAAK1C,UAAL,GAAmB;AAAA;AAAA,QAAK,WAAU,QAAf;AACb;AAAA;AAAA,SAAK,WAAY,QAAjB;AACC,iDADD;AAEC,iDAFD;AAGC,iDAHD;AAIC,iDAJD;AAKC;AALD;AADa,MAAnB,GASS;AAAA;AAAA,QAAK,WAAY,YAAjB;AAAA;AAAA;AA9BX;AAVD,IADD;AA8CA;;;;;;kBAIa,yBACd,iBAAQ;AACP,QAAO,EAACM,WAAUqC,MAAMrC,SAAjB,EAAP;AACA,CAHa,EAIbV,MAJa,EAILC,MAJK,C;;;;;;;;;;;;;kBC9HA;AACd4C,mBAAiB,mCAAW;AACxB,MAAIG,OAAO,IAAIC,IAAJ,CAASC,SAASC,QAAQC,OAAR,CAAgB,QAAhB,EAA0B,EAA1B,EAA8BA,OAA9B,CAAsC,IAAtC,EAA4C,EAA5C,CAAT,EAA0D,EAA1D,CAAT,CAAX;AACA,MAAIC,QAAQL,KAAKM,QAAL,KAAkB,CAAlB,GAAsB,EAAtB,GAA2B,OAAON,KAAKM,QAAL,KAAkB,CAAzB,CAA3B,GAAyDN,KAAKM,QAAL,KAAkB,CAAvF;AACA,MAAIC,cAAcP,KAAKQ,OAAL,KAAiB,EAAjB,GAAsB,MAAMR,KAAKQ,OAAL,EAA5B,GAA6CR,KAAKQ,OAAL,EAA/D;AACA,SAAOR,KAAKS,WAAL,KAAqB,GAArB,GAA2BJ,KAA3B,GAAmC,GAAnC,GAAyCE,WAAhD;AACH,EANa;AAOdG,cAAY,+BAAY;AACvB,MAAIV,OAAO,IAAIC,IAAJ,CAASC,SAASS,SAASP,OAAT,CAAiB,QAAjB,EAA2B,EAA3B,EAA+BA,OAA/B,CAAuC,IAAvC,EAA6C,EAA7C,CAAT,EAA2D,EAA3D,CAAT,CAAX;AACA,SAAOJ,IAAP;AACA,EAVa;AAWdY,SAAO,gBAACC,IAAD,EAAMC,IAAN,EAAe;AACrB;AACA;AACA;AACA;AACA,MAAId,OAAO,IAAIC,IAAJ,CAASC,SAASW,KAAKT,OAAL,CAAa,QAAb,EAAuB,EAAvB,EAA2BA,OAA3B,CAAmC,IAAnC,EAAyC,EAAzC,CAAT,EAAuD,EAAvD,CAAT,CAAX;AACA,MAAIW,IAAI;AACP,SAAMf,KAAKS,WAAL,EADC;AAEP,SAAMT,KAAKM,QAAL,KAAkB,CAFjB,EAEoC;AAC3C,SAAMN,KAAKQ,OAAL,EAHC,EAGkC;AACzC,SAAMR,KAAKgB,QAAL,EAJC,EAIkC;AACzC,SAAMhB,KAAKiB,UAAL,EALC,EAKkC;AACzC,SAAMjB,KAAKkB,UAAL,EANC,EAMkC;AACzC,SAAMC,KAAKC,KAAL,CAAW,CAACpB,KAAKM,QAAL,KAAkB,CAAnB,IAAwB,CAAnC,CAPC,EAOsC;AAC7C,SAAMN,KAAKqB,eAAL,CAAmC;AAAnC,KARC,EAAR;AAUA,OAAK,IAAIC,CAAT,IAAcP,CAAd,EAAiB;AACjB,OAAI,IAAIQ,MAAJ,CAAW,MAAMD,CAAN,GAAU,GAArB,EAA0BE,IAA1B,CAA+BV,IAA/B,CAAJ,EAAyC;AACvC,QAAGQ,KAAK,IAAR,EAAa;AACZR,YAAOA,KAAKV,OAAL,CAAamB,OAAOE,EAApB,EAAwB,CAAC,KAAKV,EAAEO,CAAF,CAAN,EAAYI,MAAZ,CAAmB,IAAIH,OAAOE,EAAP,CAAUvD,MAAjC,CAAxB,CAAP;AACA,KAFD,MAGK,IAAGoD,KAAG,IAAN,EAAW;AACf,SAAIK,OAAOJ,OAAOE,EAAP,CAAUvD,MAArB;AACAyD,YAAOA,QAAM,CAAN,GAAQ,CAAR,GAAUA,IAAjB;AACAb,YAAOA,KAAKV,OAAL,CAAamB,OAAOE,EAApB,EAAwB,CAAC,OAAOV,EAAEO,CAAF,CAAR,EAAcI,MAAd,CAAqB,CAAC,KAAKX,EAAEO,CAAF,CAAN,EAAYpD,MAAZ,GAAqB,CAA1C,EAA4CyD,IAA5C,CAAxB,CAAP;AACA,KAJI,MAKD;AACHb,YAAOA,KAAKV,OAAL,CAAamB,OAAOE,EAApB,EAAyBF,OAAOE,EAAP,CAAUvD,MAAV,IAAoB,CAArB,GAA2B6C,EAAEO,CAAF,CAA3B,GAAoC,CAAC,OAAOP,EAAEO,CAAF,CAAR,EAAcI,MAAd,CAAqB,CAAC,KAAKX,EAAEO,CAAF,CAAN,EAAYpD,MAAjC,CAA5D,CAAP;AACA;AACD;AACD;AACD,SAAO4C,IAAP;AACA;AA3Ca,C;;;;;;;ACAf,yC","file":"js/app-search-3.js","sourcesContent":["import ReactDOM from 'react-dom';\r\nimport React,{Component} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport *as action from '../../redux/action/fetch-action.js';\r\nimport {connect} from 'react-redux';\r\nimport DateTool from '../../utils/date-format.js';\r\nimport './search.less';\r\n\r\nclass Search extends Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.page = 1;\r\n\t\tthis.imgLoading = false;\r\n\t\tthis.dataloading = false;\r\n\t\tthis.totalCount = 0;\r\n\t\tthis.bloglist = [];\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState){\r\n\t\tif(nextProps.fetchData){\r\n    \t\tif(nextProps.fetchData.isFetching) {\r\n    \t\t\tthis.dataloading = true;\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \t\tthis.dataloading = false;\r\n    \t\tif(nextProps.fetchData.Json){\r\n\t    \t\tlet data = nextProps.fetchData.Json;\r\n\t\t\t\tif(data && data.TotalCount){\r\n\t\t\t\t\tthis.totalCount = data.TotalCount;\r\n\t\t\t\t\tif(data.PageIndex * data.PageSize >= data.TotalCount){\r\n\t\t\t\t\t\tthis.imgLoading = false;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t++this.page;\r\n\t\t\t\t\t\tthis.imgLoading = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(data.BlogWorkList && data.BlogWorkList.length){\r\n\t\t\t\t\t\tthis.bloglist = this.bloglist.concat(data.BlogWorkList);\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \treturn false;\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\twindow.onscroll = null;\r\n\t}\r\n\r\n    componentDidMount(){\r\n    \tlet _self = this;\r\n\t\twindow.onscroll = (e) => { \r\n            if (!_self.imgLoading || _self.dataloading) return;\r\n\r\n            if (document.body.scrollTop + window.innerHeight + 150 > document.body.scrollHeight) {\r\n                _self.pullBlogData();\r\n            }\r\n        }\r\n        _self.pullBlogData();\r\n    }\r\n\r\n\tpullBlogData(){\r\n\t\tthis.props.fetchPosts('http://qqweb.top/API/BlogApi/Query',{PageIndex:this.page,key:this.key});\r\n\t}\r\n\r\n\tQuery(){\r\n\t\tthis.page = 1;\r\n\t\tthis.key = this.refs.keyname.value;\r\n\t\tthis.pullBlogData();\r\n\t}\r\n\r\n\tuserEntry(e){\r\n\t\t//debugger\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className = \"searchbox\">\r\n\t\t\t\t<div className = \"head\" >\r\n\t\t\t\t\t<div className = \"searchtext\" >搜索更懂你！</div>\r\n\t\t\t\t\t<div className=\"searchinfo\">\r\n\t\t\t\t\t\t<input type = \"text\" name=\"keyname\" onInput = {this.userEntry.bind(this)} className=\"keytext\" ref = \"keyname\" />\r\n\t\t\t\t\t\t<i className = \"so\" ></i>\r\n\t\t\t\t\t\t<i className = \"del\" ></i>\r\n\t\t\t\t\t\t<div className = \"searchbtn\" onClick = {this.Query.bind(this)} >搜索</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className = \"listbox\">\r\n\t\t\t\t\t<ul className = \"list\" >\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t(this.bloglist.length > 0) && this.bloglist.map(item => {\r\n\t\t\t\t\t\t\treturn \t<li key = {item.ID} className = \"item\" >\r\n\t\t\t\t\t\t\t\t\t\t<Link to={'/detail/' + item.ID} className = \"clickarea\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className = \"contenthead\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className = \"title\">{item.Title}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className = \"tag\">分类:{item.SortName}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<p className = \"content\">{item.Content}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className = \"information\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className = \"time\">浏览:{item.PageViewTotal}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className = \"author\">{DateTool.ChangeDateFormat(item.UpdateTime)}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\t\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.imgLoading ?  <div className=\"loader\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className = \"pacman\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t \t\t\t\t\t</div>\r\n\t\t\t\t\t\t \t\t\t\t:   <div className = \"bottominfo\" >--- 我是有底线的 ---</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t    )\r\n\t}\r\n} \r\n\r\n\r\nexport default connect(\r\n\tstate=> {\r\n\t\treturn {fetchData:state.fetchData}\r\n\t}\r\n\t,action)(Search);\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/component/search/search.jsx","export default {\r\n\tChangeDateFormat:cellval => {  \r\n\t    var date = new Date(parseInt(cellval.replace(\"/Date(\", \"\").replace(\")/\", \"\"), 10));  \r\n\t    var month = date.getMonth() + 1 < 10 ? \"0\" + (date.getMonth() + 1) : date.getMonth() + 1;  \r\n\t    var currentDate = date.getDate() < 10 ? \"0\" + date.getDate() : date.getDate();  \r\n\t    return date.getFullYear() + \"-\" + month + \"-\" + currentDate;  \r\n\t},\r\n\tConvertDate:jsondate => { \r\n\t\tvar date = new Date(parseInt(jsondate.replace(\"/Date(\", \"\").replace(\")/\", \"\"), 10)); \r\n\t\treturn date;\r\n\t},\r\n\tFormat:(time,rule) => {\r\n\t\t//console.log(date.Format(\"yyyy年MM月dd日 hh:mm:ss.S\")); //输出: 2016年04月01日 10:41:08.133\r\n\t\t//console.log(date.Format(\"yyyy-MM-dd hh:mm:ss\")); //输出: 2016-04-01 10:41:08\r\n\t\t//console.log(date.Format(\"yy-MM-dd hh:mm:ss\")); //输出: 16-04-01 10:41:08\r\n\t\t//console.log(date.Format(\"yy-M-d hh:mm:ss\")); //输出: 16-4-1 10:41:08\r\n\t\tlet date = new Date(parseInt(time.replace(\"/Date(\", \"\").replace(\")/\", \"\"), 10)); \r\n\t\tlet o = {\r\n\t\t\t\"y+\": date.getFullYear(),\r\n\t\t\t\"M+\": date.getMonth() + 1,                 //月份\r\n\t\t\t\"d+\": date.getDate(),                    //日\r\n\t\t\t\"h+\": date.getHours(),                   //小时\r\n\t\t\t\"m+\": date.getMinutes(),                 //分\r\n\t\t\t\"s+\": date.getSeconds(),                 //秒\r\n\t\t\t\"q+\": Math.floor((date.getMonth() + 3) / 3), //季度\r\n\t\t\t\"S+\": date.getMilliseconds()             //毫秒\r\n\t\t};\r\n\t\tfor (var k in o) {\r\n\t\tif (new RegExp(\"(\" + k + \")\").test(rule)){\r\n\t\t\t\tif(k == \"y+\"){\r\n\t\t\t\t\trule = rule.replace(RegExp.$1, (\"\" + o[k]).substr(4 - RegExp.$1.length));\r\n\t\t\t\t}\r\n\t\t\t\telse if(k==\"S+\"){\r\n\t\t\t\t\tvar lens = RegExp.$1.length;\r\n\t\t\t\t\tlens = lens==1?3:lens;\r\n\t\t\t\t\trule = rule.replace(RegExp.$1, (\"00\" + o[k]).substr((\"\" + o[k]).length - 1,lens));\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\trule = rule.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn rule;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/date-format.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/search/search.less\n// module id = 303\n// module chunks = 3"],"sourceRoot":""}